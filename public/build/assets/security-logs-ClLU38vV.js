$(function(){const l=$("#select-all-logs"),e=$(".log-checkbox"),a=$("#bulk-delete-btn"),s=$("#toggle-select-all-btn");let c=!1;function n(){const t=e.filter(":checked").length>0;a.toggleClass("d-none",!t)}s.on("click",function(){c=!c,e.prop("checked",c),l.prop("checked",c),n(),s.html(c?'<i class="ri-checkbox-multiple-blank-line me-1"></i> إلغاء تحديد الكل':'<i class="ri-checkbox-multiple-line me-1"></i> تحديد الكل')}),l.on("change",function(){e.prop("checked",$(this).is(":checked")),n()}),e.on("change",function(){const t=e.length===e.filter(":checked").length;l.prop("checked",t),n()}),window.submitBulkDelete=function(){confirm("هل أنت متأكد من حذف السجلات المحددة؟")&&$("#bulk-delete-form").submit()},$(".resolve-form").on("submit",function(t){t.preventDefault();const o=$(this);$.ajax({url:o.attr("action"),method:"POST",data:o.serialize(),success:function(i){o.closest("td").html('<span class="badge bg-label-success">تم الحل</span>'),i.message},error:function(i){alert("حدث خطأ أثناء تحديث حالة السجل")}})})});
